(function(t){function e(e){for(var o,i,s=e[0],c=e[1],l=e[2],m=0,g=[];m<s.length;m++)i=s[m],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&g.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(g.length)g.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],o=!0,s=1;s<a.length;s++){var c=a[s];0!==r[c]&&(o=!1)}o&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var o={},r={login:0},n=[];function i(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.e=function(){return Promise.resolve()},i.m=t,i.c=o,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(a,o,function(e){return t[e]}.bind(null,o));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/lowcode-platform/admin/dist/admin/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;n.push([1,"chunk-vendors","chunk-common"]),a()})({"0775":function(t,e,a){"use strict";a("b4ac")},1:function(t,e,a){t.exports=a("352f")},"352f":function(t,e,a){"use strict";a.r(e);var o=a("8bbf"),r=a.n(o),n=a("5c96"),i=a.n(n),s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"custom-page-class"},[e("div",{staticClass:"main"},[e("div",{staticClass:"switch-nav",on:{click:t.handleClick}},[t._v("\n      "+t._s("login"==t.activeName?"注册 →":"登录 →")+"\n    ")]),t._m(0),e("div",{staticClass:"name"},[e("a",{staticClass:"github-btn",attrs:{target:"_blank",href:"https://github.com/ymm-tech/gods-pen"}},[t._m(1),e("span",{staticClass:"gh-count github"},[t._v(t._s(t.githubCount))])])]),e("div",{staticClass:"form-box"},["login"==t.activeName?e("el-form",{ref:"loginForm",attrs:{model:t.loginForm,rules:t.registerrule}},[e("el-form-item",{attrs:{label:"",prop:"account"}},[e("el-input",{attrs:{placeholder:"邮箱",type:"text","auto-complete":"on",id:"username",name:"username"},model:{value:t.loginForm.account,callback:function(e){t.$set(t.loginForm,"account",e)},expression:"loginForm.account"}})],1),e("el-form-item",{attrs:{label:"",prop:"password"}},[e("el-input",{attrs:{placeholder:"密 码",type:"password","auto-complete":"on"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),e("el-form-item",{attrs:{label:"",prop:"kaptcha"}},[e("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"验证码"},model:{value:t.loginForm.kaptcha,callback:function(e){t.$set(t.loginForm,"kaptcha",e)},expression:"loginForm.kaptcha"}}),e("img",{staticClass:"kaptchaImg",attrs:{src:t.kaptchaImg},on:{click:t.changeKaptcha}})],1),e("div",{staticClass:"submit-box"},[e("el-button",{staticClass:"submit-box__btn",attrs:{type:"primary",loading:t.loading},on:{click:t.loginSubmit}},[t._v("登 陆")]),e("div",{staticClass:"forget"},[t.enableGithub?e("div",{staticClass:"oauth-wrap",staticStyle:{float:"left"}},[e("div",{staticClass:"oauth-channel"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"GitHub登录",placement:"top"}},[e("img",{staticClass:"oauth",attrs:{src:"https://b-gold-cdn.xitu.io/v3/static/img/github.547dd8a.svg",alt:""},on:{click:function(e){return t.oauthGitHub("github")}}})])],1)]):t._e()]),e("div",{staticStyle:{float:"right",cursor:"pointer"},on:{click:t.forgetPassword}},[t._v("忘记密码？")])],1)],1):e("el-form",{ref:"registerForm",attrs:{model:t.registerForm,rules:t.registerrule}},[e("el-form-item",{attrs:{label:"",prop:"email"}},[e("el-input",{attrs:{placeholder:"邮箱"},on:{blur:t.emailBlur},model:{value:t.registerForm.email,callback:function(e){t.$set(t.registerForm,"email",e)},expression:"registerForm.email"}})],1),e("el-form-item",{attrs:{label:"",prop:"name"}},[e("el-input",{attrs:{placeholder:"姓 名"},model:{value:t.registerForm.name,callback:function(e){t.$set(t.registerForm,"name",e)},expression:"registerForm.name"}})],1),e("el-form-item",{attrs:{label:"",prop:"password"}},[e("el-input",{attrs:{placeholder:"密 码",type:"password"},model:{value:t.registerForm.password,callback:function(e){t.$set(t.registerForm,"password",e)},expression:"registerForm.password"}})],1),e("el-form-item",{attrs:{label:"",prop:"password2"}},[e("el-input",{attrs:{placeholder:"确认密码",type:"password"},model:{value:t.registerForm.password2,callback:function(e){t.$set(t.registerForm,"password2",e)},expression:"registerForm.password2"}})],1),e("el-form-item",{attrs:{label:"",prop:"kaptcha"}},[e("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"验证码"},model:{value:t.registerForm.kaptcha,callback:function(e){t.$set(t.registerForm,"kaptcha",e)},expression:"registerForm.kaptcha"}}),e("img",{staticClass:"kaptchaImg",attrs:{src:t.kaptchaImg},on:{click:t.changeKaptcha}})],1),e("div",{staticClass:"submit-box"},[e("el-button",{staticClass:"submit-box__btn",attrs:{type:"primary",loading:t.loading},on:{click:t.registerSubmit}},[t._v("注 册")])],1)],1)],1)]),t._m(2)])},c=[function(){var t=this,e=t._self._c;return e("a",{attrs:{href:"https://godspen.ymm56.com/",target:"_blank"}},[e("img",{staticClass:"logo",attrs:{src:a("a1d8"),alt:"logo"}})])},function(){var t=this,e=t._self._c;return e("span",{staticClass:"gh-btn github"},[e("span",{staticClass:"gh-icon"}),e("span",{staticClass:"gh-text"},[t._v("Star")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer"},[e("div",{staticClass:"slogan"},[e("img",{staticClass:"slogan-logo",attrs:{src:a("a1d8"),alt:"logo"}}),e("span",[t._v("码良    高扩展的在线网页制作平台")])]),e("div",{staticClass:"links"},[e("a",{attrs:{href:"https://godspen.ymm56.com/doc/cookbook/introduce.html#%E7%A0%81%E8%89%AF%E6%98%AF%E4%BB%80%E4%B9%88",target:"_blank"}},[t._v("关于码良")]),e("a",{attrs:{href:"https://godspen.ymm56.com/doc/cookbook/introduce.html",target:"_blank"}},[t._v("使用帮助")])])])}],l={1:{name:"项目权限清晰",description:"类 gitlab 权限管理体系",img:a("3fa5")},2:{name:"编辑操作高效",description:"拖拽挪移，随心所欲",img:a("3fa5")},3:{name:"组件接入简单",description:"命令行工具一条龙服务",img:a("3fa5")},4:{name:"分发机制健全",description:"短链、二维码、分享能力应有尽有",img:a("3fa5")}},u={1:{title:"相关资源",list:[{name:"码良脚手架",des:"",link:"https://github.com/ymm-tech/gods-pen-cli"},{name:"码良部署",des:"",link:"https://github.com/ymm-tech/gods-pen-docker"},{name:"码良文档",des:"",link:"https://github.com/ymm-tech/gods-pen-doc"}]},2:{title:"社区",list:[{name:"错误反馈",link:"https://github.com/ymm-tech/gods-pen/issues"}]},3:{title:"关于我们",list:[{name:"运满满",link:"http://www.ymm56.com/"}]}},m=a("c455"),g=a("f121"),d=a.n(g),p=a("94f8"),h={computed:{},data:function(){var t=this,e=function(e,a,o){""===a?o(new Error("请再次输入密码")):a!==t.registerForm.password?o(new Error("两次输入密码不一致!")):o()};return{githubCount:"",contentPart:l,footerPart:u,loading:!1,registerrule:{kaptcha:[{required:!0,message:"输入4位验证码",trigger:"blur"},{min:4,max:4,message:"输入4位验证码",trigger:"blur"}],name:[{required:!0,message:"输入用户名",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],account:[{required:!0,message:"请输入账号",trigger:"blur"},{min:5,max:50,message:"长度在 5 到 50 个字符",trigger:"blur"}],password:[{required:!0,message:"输入密码",trigger:"blur"},{min:6,max:20,message:"6-20位大小写字母和._-组成的名称",trigger:"blur"}],password2:[{validator:e,trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur,change"}]},kaptchaImg:"",loginForm:{account:"",password:"",kaptcha:"",remember:!0},registerForm:{email:"",kaptcha:"",name:"",password:"",password2:""},activeName:"login",enableGithub:d.a.enableGithub}},mounted:function(){var t=this;window.fetch("https://api.github.com/repos/ymm-tech/gods-pen").then((function(t){return t.json()})).then((function(e){t.githubCount=e.stargazers_count})),window.EMA.bind("logout",(function(){t.logout()})),window.EMA.bind("loading.show",(function(){t.showLoading=!0})),window.EMA.bind("loading.hide",(function(){t.showLoading=!1})),window.EMA.bind("alert.show",(function(e,a){t.$alert(e,"注意",{callback:function(t){"function"==typeof a&&a()}})}));var e=window.location.search.match(/code=([^&]+)/)&&window.location.search.match(/code=([^&]+)/)[1],a=window.location.search.match(/from=([^&]+)/)&&window.location.search.match(/from=([^&]+)/)[1];e&&this.dealOauth(e,a),this.changeKaptcha();var o=window.localStorage.getItem("loginuser")||"{}",r={};try{r=JSON.parse(o)}catch(n){r={}}this.loginForm.account=r.account,this.loginForm.password=r.password},methods:{oauthGitHub:function(t){Object(m["a"])({url:"users/oauthCode",needLoading:!0,data:{channel:t},method:"post"}).then((function(t){var e=t.data;e.data&&window.location.replace(e.data.redirect)}))},dealOauth:function(t,e){var a=this;Object(m["a"])({url:"users/oauthLogin",data:{code:t,channel:e},needLoading:!0,method:"post"}).then((function(t){a.loginSuccess()})).catch((function(t){a.loading=!1,console.log("err",t)}))},forgetPassword:function(){var t=this;this.loginForm.account?this.$confirm("确认忘记密码！请前往邮箱通过点击链接重置密码！","忘记密码",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.sendEmail()})).catch((function(){})):this.$alert("请输入账号")},sendEmail:function(){Object(m["a"])({url:"users/sendEmail",data:{email:this.loginForm.account},method:"post"}).then((function(t){}))},checkLogin:function(){var t=this;Object(m["a"])({url:"users/info",params:{uid:0},method:"get"}).then((function(e){t.loginSuccess()})).catch((function(){}))},changeKaptcha:function(){var t=this;Object(m["a"])({url:"kaptcha/init",method:"get"}).then((function(e){var a=e.data.data;t.kaptchaImg="data:image/jpg;base64,"+a.img})).catch((function(e){t.loading=!1,console.log("err",e)}))},parseURL:function(t){var e=document.createElement("a");return e.href=t,{params:function(){for(var t={},a=e.search.replace(/^\?/,"").split("&"),o=a.length,r=0,n=null;r<o;r++)a[r]&&(n=a[r].split("="),t[n[0]]=n[1]);return t}()}},editPassword:function(){},handleClick:function(){this.activeName="login"==this.activeName?"register":"login",this.resetForm(),this.changeKaptcha()},loginSuccess:function(t){this.loading=!1;var e=this.parseURL(window.location.href);e.params.url?window.location.replace(decodeURIComponent(e.params.url)):window.location.replace("index.html")},loginSubmit:function(){var t=this;return this.$refs.loginForm.validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,Object(m["a"])({url:"users/login",data:{account:t.loginForm.account,kaptcha:t.loginForm.kaptcha,password:p(t.loginForm.password)+""},needLoading:!0,method:"post"}).then((function(e){window.localStorage.setItem("loginuser",JSON.stringify({account:t.loginForm.account,password:t.loginForm.password})),t.loginSuccess(e.data),console.log("sucee")})).catch((function(e){t.loading=!1,console.log("err",e)}))})),!1},emailBlur:function(){var t=this.registerForm.email.split("@");this.registerForm.name=t[0]},registerSubmit:function(){var t=this;this.$refs.registerForm.validate((function(e){if(!e)return!1;t.loading=!0,Object(m["a"])({url:"users/register",data:{email:t.registerForm.email,kaptcha:t.registerForm.kaptcha,name:t.registerForm.name,password:p(t.registerForm.password)+""},method:"post"}).then((function(e){t.loginSuccess()})).catch((function(e){t.loading=!1,console.log("err",e)}))}))},resetForm:function(){var t="login"==this.activeName?"registerForm":"loginForm";this.$refs[t].resetFields()}}},f=h,b=(a("0775"),a("2877")),w=Object(b["a"])(f,s,c,!1,null,"0e0d7bd4",null),v=w.exports,k=a("91c4");a("0fae");a("c451"),window.EMA=new k["a"],a("a531"),r.a.use(i.a),r.a.config.devtools=!1,new r.a({el:"#app",render:function(t){return t(v)}})},"3fa5":function(t,e,a){t.exports=a.p+"static/img/1.bebde0f1.png"},"8bbf":function(t,e){t.exports=Vue},b4ac:function(t,e,a){}});