(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77dc6f93","chunk-27d5103c"],{"0351":function(t,e,n){"use strict";n("a9e5")},"3c79":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"project-edit-container"},[e("div",{staticClass:"project-edit-errors"}),e("div",{staticClass:"row prepend-top-default"},[e("div",{staticClass:"col-lg-3 profile-settings-sidebar"},[e("h4",{staticClass:"prepend-top-0"},[t.id?e("div",[t._v("\n          更新项目\n        ")]):e("div",[t._v("\n          新建项目\n        ")])]),e("p"),t.id?e("div",[t._v("\n          修改自己的项目内容\n        ")]):e("div",[t._v("\n          创建的项目必须在指定的一个组里面，可以自己新建团队\n        ")]),e("p")]),e("div",{staticClass:"col-lg-9"},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"图标"}},[e("div",{staticClass:"headIcon"},[e("img",{attrs:{src:t._f("defaultProject")(t.form.image)}})]),e("upload",{attrs:{accept:"image",showBtn:!0,auto:!0},on:{uploadSuccess:t.uploadEnd}})],1),e("el-form-item",{attrs:{label:"所属组",prop:"groupId",rules:[{required:!0,message:"请选择所属组",trigger:"change"}]}},[e("el-select",{attrs:{filterable:"",placeholder:"请选择"},model:{value:t.form.groupId,callback:function(e){t.$set(t.form,"groupId",e)},expression:"form.groupId"}},t._l(t.options,(function(n){return e("el-option",{key:n.id,attrs:{label:n.name,value:n.id}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(n.name))]),e("img",{staticClass:"group-img",attrs:{src:t._f("defaultGroup")(n.image)}})])})),1),e("el-button",{attrs:{type:"text"},on:{click:t.addGroup}},[t._v("添加组")])],1),e("el-form-item",{attrs:{label:"项目名称",prop:"name",rules:[{required:!0,message:"输入1-35位项目名",trigger:"blur"},{min:1,max:35,message:"长度在 1 到 35 个字符",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"项目名称",maxlength:35},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"desc",rules:[{required:!0,message:"输入描述",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]}},[e("el-input",{attrs:{type:"textarea",maxlength:50},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)])])},i=[],a=n("f458"),r=n("d443"),s=n("c455");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function u(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e=p(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){var e=m(t,"string");return"symbol"===c(e)?e:String(e)}function m(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var f={mixins:[a["a"]],components:{Upload:r["a"]},name:"projects_cnew",props:{id:{type:Number},info:{type:Object}},data:function(){return{loading:!1,options:[],value:"",form:{visibilitylevel:0,image:"",name:"",groupId:"",desc:""}}},mounted:function(){this.id&&this.getProjectInfo(),this.getGrops()},methods:{makeSecurity:function(){for(var t=32,e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",n=e.length,o="",i=0;i<t;i++)o+=e.charAt(Math.floor(Math.random()*n));this.form.security=o},addGroup:function(){var t=this;this.openDialog({name:"DAddGroup",data:{title:"添加团队"},methods:{onAdd:function(e){t.options.unshift(e),t.form.groupId=e.id}}})},uploadEnd:function(t){this.form.image=t},getProjectInfo:function(){var t=this;Object(s["a"])({url:"project/projectinfo",method:"get",params:{id:this.id}}).then((function(e){var n=e.data.data;t.form={image:n.image,name:n.projectName,groupId:n.groupId,desc:n.desc,ddwebhook:n.ddwebhook,visibilitylevel:n.visibilitylevel}}))},getGrops:function(){var t=this;Object(s["a"])({url:"project/group",method:"get",params:{type:0,start:0,count:100}}).then((function(e){var n=e.data.data;t.options=n})).catch((function(){}))},onSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$message("信息填写错误"),!1;t.loading=!0,t.id?Object(s["a"])({url:"project/project",method:"put",data:u(u({},t.form),{},{id:t.id})}).then((function(e){t.loading=!1,t.$notify({title:"成功",message:"修改成功",type:"success"})})).catch((function(){t.loading=!1,t.$notify({itle:"警告",message:"修改失败",type:"warning"})})):Object(s["a"])({url:"project/project",method:"post",data:t.form}).then((function(e){t.loading=!1,t.$notify({title:"成功",message:"创建成功",type:"success"}),t.$router.push({path:"/dashboard/projects"})})).catch((function(){t.loading=!1}))}))}}},g=f,h=(n("0351"),n("2877")),b=Object(h["a"])(g,o,i,!1,null,"08b595e8",null);e["default"]=b.exports},7549:function(t,e,n){},a9e5:function(t,e,n){},aff5:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"flash-container flash-container-page"}),e("div",{staticClass:"container-fluid container-limited"},[e("div",{staticClass:"content"},[e("c-new")],1)])])},i=[],a=n("f458"),r=n("3c79"),s={mixins:[a["a"]],components:{CNew:r["default"]},name:"projects_new",data:function(){return{value:"",form:{image:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100",name:"",groupId:"",description:""}}},mounted:function(){},methods:{onSubmit:function(){}}},c=s,l=(n("e654"),n("2877")),u=Object(l["a"])(c,o,i,!1,null,"e5850b6c",null);e["default"]=u.exports},d443:function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showBtn,expression:"showBtn"}],attrs:{size:t.size,id:"virtualUpload",type:"primary"}},[t._v("上传\n  "),e("i",{staticClass:"el-icon-upload el-icon--right"})])},i=[],a=n("e97e"),r=n("46ee"),s=n.n(r),c=n("c455"),l=function(t){Object(c["a"])({url:"upload/getTocken",method:"get",needLoading:!1,data:{}}).then((function(e){var n=e.data.data;t(n)}))},u=function(t){var e=t.id,n=(t.fileName,t.filters),o=t.isAddUploadFile,i=t.callback;this.imgSrc="";var r=!1,c=this,l={image:{title:"资源选择",extensions:"jpg,gif,png,jpeg"},video:{title:"资源选择",extensions:"mp4"},audio:{title:"资源选择",extensions:"mp3"}};this.uploader=new s.a.Uploader({runtimes:"html5",browse_button:e,url:"https://oss.aliyuncs.com",filters:[l[n]],prevent_duplicates:!0,max_file_size:"100mb",init:{PostInit:function(){},FilesAdded:function(t,e){if(r)return!1;r=!0;var n=this,i=e[0].name;if(o){var s=i.lastIndexOf(".");-1!==s&&(i="ymm_"+(new Date).getTime()+i.substring(s)),a["c"].readAsDataURL(e[0].getNative(),(function(t){var o=new window.File([a["c"].getBlobBydataURI(t,e[0].type)],i,{type:e[0].type});n.addFile(o),n.removeFile(e[0]),c.send(i)}))}},BeforeUpload:function(t,e){},UploadProgress:function(t,e){},FileUploaded:function(t,e,n){200===n.status&&(c.imgSrc=c.imgSrc.replace("ymm.oss-cn-hangzhou.aliyuncs.com","imagecdn.ymm56.com"),i(c.imgSrc)),r=!1},Error:function(t,e){}}}),this.uploader.init()};u.prototype.send=function(t){var e=this;t=t||"ymm"+(new Date).getTime()+".png",l((function(n){n.key=n.dir+t,e.imgSrc=n.host+"/"+n.key;var o={key:n.key,policy:n.policy,OSSAccessKeyId:n.accessid,success_action_status:"200",signature:n.signature};console.log("newMultipartParams",o),e.uploader.setOption({url:n.host,multipart_params:o}),e.uploader.start()}))};var d=u,p=n("ed03"),m={mixins:[p["a"]],name:"UploadImage",components:{},props:{h2c:{required:!1,type:Object,default:function(){return{}}},templateElement:{type:String},size:{type:String,default:"medium"},accept:{type:String,default:""},auto:{type:Boolean,default:!1},showBtn:{type:Boolean,default:!1}},data:function(){return{uploadObject:null,options:null,onUploaded:null,templateData:{name:"",desc:""}}},watch:{accept:function(t){var e=this;this.uploadObject=new d({id:this.$el,isAddUploadFile:this.auto,filters:this.accept,callback:function(t){e.$emit("uploadSuccess",t),"function"===typeof e.onUploaded&&e.onUploaded(t)}})}},beforeDestroy:function(){},mounted:function(){var t=this;this.uploadObject=new d({id:this.$el,isAddUploadFile:this.auto,filters:this.accept,callback:function(e){t.$emit("uploadSuccess",e),"function"===typeof t.onUploaded&&t.onUploaded(e)}}),this.ema.bind("saveTemplate",(function(){t.options=null,t.onUploaded=null,t.getImageDataByDom(document.querySelector(t.templateElement),(function(e){t.uploadImg(e)}))}))},methods:{upload:function(t,e,n){var o=this;this.options=e||null,this.onUploaded=n||null,t=t||document.querySelector(this.templateElement),this.getImageDataByDom(t,(function(t){o.uploadImg(t)}))},uploadImg:function(t){var e="ymm"+(new Date).getTime()+".png",n=this,o=new window.File([a["c"].getBlobBydataURI(t,"image/png")],e,{type:"image/png"});n.uploadObject.uploader.addFile(o),n.uploadObject.send()},getImageDataByDom:function(t,e){a["c"].html2canvas(t,this.h2c).then((function(t){var n=t.toDataURL();e&&e(n)}))}}},f=m,g=n("2877"),h=Object(g["a"])(f,o,i,!1,null,"2bff0db8",null);e["a"]=h.exports},e654:function(t,e,n){"use strict";n("7549")}}]);