(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-562bc6f6","chunk-eb4c3850"],{"48e1":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"flash-container flash-container-page"}),e("div",{staticClass:"container-fluid container-limited"},[e("div",{staticClass:"content"},[e("section",{staticClass:"activities"},[e("div",{staticClass:"nav-block top-area"},[e("div",{staticClass:"controls"}),e("el-tabs",{staticClass:"nav-links",attrs:{"active-name":t.currCategoryType},on:{"tab-click":t.requestTabClick}},t._l(t.Categorys,(function(r){return e("el-tab-pane",{key:r.id,attrs:{name:r.name}},[e("span",{attrs:{slot:"label"},slot:"label"},[t._v("\n                "+t._s(r.desc)+"\n              ")])])})),1),e("div",{staticClass:"nav-controls"},[e("div",{staticClass:"dropdown inline"},[e("el-input",{attrs:{size:"large",placeholder:"搜索"},model:{value:t.searchName,callback:function(e){t.searchName=e},expression:"searchName"}})],1),e("el-button",{on:{click:function(e){return t.searchResource()}}},[t._v("搜索")])],1)],1),e("div",{staticClass:"searchTags"},t._l(t.canSelectTags,(function(r,a){return e("el-tag",{key:a,staticClass:"tag",attrs:{type:r.type||"info"},nativeOn:{click:function(e){return t.selectTag(r)}}},[e("i",{staticClass:"ifont icon-tag"}),t._v(t._s(r.name)+"\n          ")])})),1),e("div",{staticClass:"content_list"},t._l(t.productList,(function(a,n){return e("div",{staticClass:"boxSize"},[a.name?e("div",{staticClass:"sourceName"},[t._v(t._s(a.name))]):t._e(),"image"==t.typeMap[a.categoryId+""]?e("div",{staticClass:"sourceImg"},[e("img",{attrs:{src:a.content+"?x-oss-process=image/resize,h_200",alt:""}})]):t._e(),"audio"==t.typeMap[a.categoryId+""]?e("div",{staticClass:"sourceAudio"},[e("audio",{attrs:{controls:"controls"}},[e("source",{attrs:{src:a.content,type:"audio/mpeg"}})])]):t._e(),"video"==t.typeMap[a.categoryId+""]?e("div",{staticClass:"sourceVideo"},[e("video",{attrs:{controls:"controls",src:a.content}})]):t._e(),"script"==t.typeMap[a.categoryId+""]?e("div",{staticClass:"sourceImg"},[e("img",{attrs:{src:r("8c9b")}})]):t._e(),"combinedcomponent"==t.typeMap[a.categoryId+""]?e("div",{staticClass:"sourceImg"},[e("img",{attrs:{src:a.icon}})]):t._e(),e("div",{staticClass:"sourceButton"},[t.userInfo.userId==a.userId?e("div",{staticClass:"editButton",on:{click:function(e){return t.goEditer(a)}}},[t._v("编辑")]):t._e(),t.userInfo.userId==a.userId?e("div",{staticClass:"editButton",staticStyle:{"background-color":"#f56c6c"},on:{click:function(e){return t.delet(a)}}},[t._v("删除")]):t._e()])])})),0),e("el-pagination",{staticClass:"paginationWarp",attrs:{"current-page":t.pagination.curr,"page-size":t.pagination.size,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"current-change":t.searchResource}})],1)])])])},n=[],i=r("f458"),o=r("a15d"),c=r("c455"),s=r("5880");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return e=f(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=g(t,"string");return"symbol"===u(e)?e:String(e)}function g(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==u(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m={mixins:[i["a"]],components:{resourceImage:o["default"]},name:"dashboard_resources",data:function(){return{typeList:[],productList:[],searchName:"",currCategoryType:"image",canSelectTags:[],pagination:{total:0,curr:1,size:40},loading:!1,list:[]}},watch:{currCategoryType:{immediate:!0,handler:function(t){this.loadTags(),this.searchResource()}}},computed:Object(s["mapState"])({typeMap:function(t){var e={};return t.Categorys.filter((function(t){e[t.id]=t.name})),e},Categorys:function(t){return t.Categorys.filter((function(t){if(3==t.type)return!0}))},currCategory:function(t){var e=this;return this.Categorys.find((function(t){if(t.name==e.currCategoryType)return!0}))}}),mounted:function(){this.loadTags()},filters:{},methods:{selectTag:function(t){t.type?this.$set(t,"type",""):this.$set(t,"type","success"),this.searchResource()},loadTags:function(t){var e=this;this.currCategory&&Object(c["a"])({url:"editor/tags/list",data:{categoryId:this.currCategory.id,name:""},method:"post"}).then((function(t){var r=t.data.data;e.canSelectTags=r})).catch((function(t){}))},goEditer:function(t){this.$router.push({path:"/resource/editer",query:{id:t.id}})},requestTabClick:function(t){this.currCategoryType=t.name},showEdit:function(t){},searchResource:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;if(this.currCategory){var r={categoryId:this.currCategory.id};this.searchName&&(r.name=this.searchName),r.categoryId?r.categoryId=+r.categoryId:delete r.categoryId,t&&(e.pagination.curr=t),r.tags=this.canSelectTags.filter((function(t){return"success"==t.type})),Object(c["a"])({url:"editor/resources/list",method:"post",needLoading:!0,trimNull:!1,mock:!1,data:d(d({},r),{},{pageSize:e.pagination.size,page:e.pagination.curr})}).then((function(t){var r=t.data.data;e.productList=r.list||[],e.pagination.total=r.total}))}},delet:function(t){var e=this;e.$confirm("是否删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(c["a"])({url:"editor/resources/delete",method:"POST",needLoading:!0,trimNull:!1,data:{id:+t.id}}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.searchResource()}))})).catch((function(){}))},codeScript:function(t){this.$message({type:"success",message:"暂时不支持编辑脚本!"})}}},y=m,h=(r("a000"),r("2877")),v=Object(h["a"])(y,a,n,!1,null,"05dcb004",null);e["default"]=v.exports},"4c59":function(t,e,r){},"8c9b":function(t,e,r){t.exports=r.p+"static/img/javascr.a33de786.jpg"},a000:function(t,e,r){"use strict";r("4c59")},a15d:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page"},[e("el-form",{attrs:{inline:!0}},[e("el-form-item",{attrs:{label:"项目名称"}},[e("el-input",{attrs:{placeholder:"请输入项目名称"},model:{value:t.parameter.name,callback:function(e){t.$set(t.parameter,"name",e)},expression:"parameter.name"}})],1),e("el-form-item",{attrs:{label:"分类"}},[e("el-select",{model:{value:t.parameter.categoryId,callback:function(e){t.$set(t.parameter,"categoryId",e)},expression:"parameter.categoryId"}},t._l(t.typeList,(function(t,r){return e("el-option",{key:r,attrs:{label:t.name,value:t.id}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"search"},on:{click:function(e){return t.searchProductAction()}}},[t._v("查询")])],1),e("el-form-item",{attrs:{label:""}},[e("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.showEdit()}}},[t._v("添加资源")])],1)],1),t._l(t.productList,(function(a,n){return e("div",{staticClass:"boxSize"},[e("div",{staticClass:"sourceName"},[t._v(t._s(a.name))]),4==a.categoryId?e("div",{staticClass:"sourceImg"},[e("img",{attrs:{src:a.content,alt:""}})]):t._e(),5==a.categoryId?e("div",{staticClass:"sourceAudio"},[e("audio",{ref:"audioPL",refInFor:!0,attrs:{controls:"controls"}},[e("source",{attrs:{src:a.content,type:"audio/mpeg"}})])]):t._e(),6==a.categoryId?e("div",{staticClass:"sourceImg"},[e("img",{attrs:{src:r("8c9b")}})]):t._e(),e("div",{staticClass:"sourceButton"},[e("div",{staticClass:"editButton",on:{click:function(e){return t.showEdit(a)}}},[t._v("编辑")]),e("div",{staticClass:"editButton",staticStyle:{"background-color":"#f56c6c"},on:{click:function(e){return t.delet(a)}}},[t._v("删除")])])])})),e("el-table",{staticStyle:{width:"100%",height:"0px"},attrs:{data:t.productList,border:""}}),e("el-pagination",{staticClass:"paginationWarp",attrs:{"current-page":t.pagination.curr,"page-size":t.pagination.size,layout:"total, prev, pager, next, jumper",total:t.pagination.total},on:{"current-change":t.searchLists}})],2)},n=[],i=r("f458"),o=r("c455");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,a)}return r}function u(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){l(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function l(t,e,r){return e=d(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function d(t){var e=p(t,"string");return"symbol"===c(e)?e:String(e)}function p(t,e){if("object"!==c(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var a=r.call(t,e||"default");if("object"!==c(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var f={mixins:[i["a"]],components:{},data:function(){return{typeList:[],productList:[],parameter:{name:"",categoryId:null},pagination:{total:0,curr:1,size:10}}},created:function(){var t=this;if(window.sessionStorage.dataBack){var e=JSON.parse(window.sessionStorage.dataBack);t.parameter=e.parameter,t.pagination.curr=e.pageNo,window.sessionStorage.removeItem("dataBack")}},computed:{},watch:{},mounted:function(){this.searchProductAction(),this.getTypeList()},methods:{getTypeList:function(){var t=this;Object(o["a"])({url:"editor/category/list",method:"POST",needLoading:!0,trimNull:!1,data:{type:3}}).then((function(e){var r=e.data;t.typeList=r.data||[],t.typeList.map((function(t){t.id=(t.id||"").toString()}))}))},searchLists:function(t){var e=this;e.searchProductAction(t)},showEdit:function(t){var e=this,r={parameter:e.parameter,pageNo:e.pagination.curr};r&&(window.sessionStorage.dataBack=JSON.stringify(r)),t?window.sessionStorage.resource=JSON.stringify(t):window.sessionStorage.removeItem("resource"),window.location.hash="#/visualization/dialog/d-resourceEdit"},searchProductAction:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this,r=Object.assign({},e.parameter);r.name||delete r.name,r.categoryId?r.categoryId=+r.categoryId:delete r.categoryId,t&&(e.pagination.curr=t),Object(o["a"])({url:"editor/resources/list",method:"post",needLoading:!0,trimNull:!1,mock:!1,data:u(u({},r),{},{pageSize:e.pagination.size,page:e.pagination.curr})}).then((function(t){var r=t.data.data||"";e.productList=r.list||[],e.pagination.total=r.total}))},delet:function(t){var e=this;e.$confirm("是否删除？",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["a"])({url:"editor/resources/delete",method:"POST",needLoading:!0,trimNull:!1,data:{id:+t.id}}).then((function(t){e.$message({type:"success",message:"删除成功!"}),e.searchProductAction()}))})).catch((function(){}))},codeScript:function(t){this.openDialog({name:"visualization/dialog/d-codeScript",data:{content:t.content},methods:{}})}},filters:{}},g=f,m=(r("af65"),r("2877")),y=Object(m["a"])(g,a,n,!1,null,"7ff1ee0d",null);e["default"]=y.exports},af65:function(t,e,r){"use strict";r("e1ef")},e1ef:function(t,e,r){}}]);