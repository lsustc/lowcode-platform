(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3027fc60"],{"3e8b":function(t,e,o){"use strict";o("7954")},7954:function(t,e,o){},"9a39":function(t,e,o){"use strict";o.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"flash-container flash-container-page"}),e("div",{staticClass:"container-fluid container-limited"},[e("div",{staticClass:"content"},[e("div",{staticClass:"project-edit-container"},[e("div",{staticClass:"project-edit-errors"}),e("div",{staticClass:"row prepend-top-default"},[e("div",{staticClass:"col-lg-3 profile-settings-sidebar"},[e("h4",{staticClass:"prepend-top-0"},[t.id?e("div",[t._v("\n                资源信息修改\n              ")]):t._e()]),e("p"),t.id?e("div",[t._v("\n                修改资源信息\n              ")]):t._e(),e("p")]),t.form.categoryId?e("div",{staticClass:"col-lg-9"},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"类型"}},[e("el-tag",[t._v(t._s(t._f("categoryDesc")(t.form.categoryId,t.typeMap)))])],1),"image"!=t.categoryType?e("el-form-item",{attrs:{label:"图标"}},[e("div",{staticClass:"headIcon"},[e("img",{attrs:{src:t.form.icon}})]),e("upload",{key:"icon",attrs:{accept:"image",showBtn:!0,auto:!0},on:{uploadSuccess:t.uploadIconEnd}})],1):t._e(),e("el-form-item",{attrs:{label:"名称",prop:"name"}},[e("el-input",{attrs:{placeholder:"名称",maxlength:35},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"内容"}},["image"==t.categoryType?[e("div",{staticClass:"headIcon"},[e("img",{attrs:{src:t.form.content}})]),e("upload",{key:"image",attrs:{accept:"image",showBtn:!0,auto:!0},on:{uploadSuccess:t.uploadContentEnd}})]:t._e(),"audio"==t.categoryType?[t.form.content?e("div",{staticClass:"headAudio"},[e("audio",{attrs:{src:t.form.content,controls:""}})]):t._e(),e("upload",{key:"audio",attrs:{accept:"audio",showBtn:!0,auto:!0},on:{uploadSuccess:t.uploadContentEnd}})]:t._e(),"video"==t.categoryType?[t.form.content?e("video",{staticClass:"headVideo",attrs:{src:t.form.content,controls:""}}):t._e(),e("upload",{key:"video",attrs:{accept:"video",showBtn:!0,auto:!0},on:{uploadSuccess:t.uploadContentEnd}})]:t._e(),"script"==t.categoryType?[e("code-editer",{staticClass:"scriptEditer",attrs:{ctype:"javascript",options:{readOnly:!1},contents:t.form.content},on:{"update:contents":function(e){return t.$set(t.form,"content",e)}}})]:t._e(),"combinedcomponent"==t.categoryType?[e("code-editer",{staticClass:"scriptEditer",attrs:{ctype:"json",options:{readOnly:!0},contents:JSON.stringify(JSON.parse(t.form.content),null,2)}})]:t._e()],2),e("el-form-item",{attrs:{label:"标签"}},[t.form.categoryId?e("tags",{attrs:{"can-add":!0,"category-id":t.form.categoryId,tags:t.form.tags},on:{"update:tags":function(e){return t.$set(t.form,"tags",e)}}}):t._e()],1),e("el-form-item",{attrs:{label:"描述",prop:"desc",rules:[{required:!1,message:"输入描述",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]}},[e("el-input",{attrs:{type:"textarea",maxlength:50},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),e("el-form-item",{attrs:{label:"是否公开"}},[e("el-radio-group",{model:{value:t.form.visibilitylevel,callback:function(e){t.$set(t.form,"visibilitylevel",e)},expression:"form.visibilitylevel"}},[e("el-radio",{attrs:{label:0}},[t._v("否")]),e("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1):t._e()])])])])])},n=[],a=o("f458"),i=o("c455"),s=o("d443"),c=o("3855"),l=o("5880"),d=o("8568");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function f(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,r)}return o}function p(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?f(Object(o),!0).forEach((function(e){m(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):f(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function m(t,e,o){return e=y(e),e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}function y(t){var e=g(t,"string");return"symbol"===u(e)?e:String(e)}function g(t,e){if("object"!==u(t)||null===t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var b={mixins:[a["a"]],components:{Upload:s["a"],Tags:c["a"],CodeEditer:d["a"]},data:function(){return{loading:!1,id:0,form:{id:0,name:"",icon:"",content:"",categoryId:0,visibilitylevel:0,desc:"",tags:[]}}},computed:Object(l["mapState"])({typeMap:function(t){var e={};return t.Categorys.filter((function(t){e[t.id]=t})),e},categoryType:function(){return this.typeMap[this.form.categoryId]&&this.typeMap[this.form.categoryId].name},Categorys:function(t){return t.Categorys}}),watch:{},mounted:function(){this.id=this.$route.query.id-0,this.getTypeList()},filters:{categoryDesc:function(t,e){return e[t]&&e[t].desc}},methods:{uploadContentEnd:function(t){this.form.content=t},uploadIconEnd:function(t){this.form.icon=t},getTypeList:function(){var t=this;Object(i["a"])({url:"editor/resources/info",method:"get",params:{id:this.id}}).then((function(e){var o=e.data.data;for(var r in t.form)t.form.hasOwnProperty(r)&&o[r]&&(t.form[r]=o[r]);console.log(o)}))},onSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$message("信息填写错误"),!1;t.loading=!0,Object(i["a"])({url:"editor/resources/save",method:"post",data:p({},t.form)}).then((function(e){t.loading=!1,t.$notify({title:"成功",message:"修改成功",type:"success"})})).catch((function(){t.loading=!1,t.$notify({itle:"警告",message:"修改失败",type:"warning"})}))}))}}},v=b,h=(o("3e8b"),o("2877")),O=Object(h["a"])(v,r,n,!1,null,"77c71a7a",null);e["default"]=O.exports}}]);