(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d7f20ebc","chunk-446e3cfd","chunk-3776afe8","chunk-2d0ceffb"],{"0923":function(t,e,n){"use strict";n("9b1c")},"284f":function(t,e,n){},"34ac":function(t,e,n){"use strict";n("57ac")},3855:function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editerTags"},[e("span",{staticClass:"tagWarp"},[t._l(t.tags,(function(n,r){return e("el-tag",{key:r,staticClass:"tag",attrs:{closable:!0,"close-transition":!1},on:{close:function(e){return t.handleClose(r,n)}}},[e("i",{staticClass:"ifont icon-tag"}),t._v(t._s(n.name)+"\n    ")])})),t.inputVisible?e("el-autocomplete",{attrs:{size:"mini","value-key":"name","fetch-suggestions":t.querySearchAsync,maxlength:10,minlength:1,placeholder:"请输入内容"},on:{select:t.handleSelect},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm.apply(null,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t._e(),t.canAdd&&t.inputBtnVisible?e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){t.inputVisible=!0,t.inputBtnVisible=!1}}},[t._v("+新标签")]):t._e()],2),e("div",[e("h4",[t._v("可快速选标签列表")]),t._l(t.canSelectTags,(function(n,r){return e("el-tag",{key:r,staticClass:"tag",nativeOn:{click:function(e){return t.selectTag(n)}}},[e("i",{staticClass:"ifont icon-tag"}),t._v(t._s(n.name)+"\n    ")])}))],2)])},i=[],o=n("ed03"),a=n("c455"),c={mixins:[o["a"]],name:"UploadImage",components:{},props:{tags:{type:Array,default:function(t){return[]}},categoryId:{type:Number},canAdd:{type:Boolean,default:!1}},data:function(){return{canSelectTags:[],inputVisible:!1,inputBtnVisible:!0,inputValue:""}},watch:{},beforeDestroy:function(){},mounted:function(){this.categoryId&&this.loadTags()},methods:{querySearchAsync:function(t,e){Object(a["a"])({url:"editor/tags/list",data:{categoryId:this.categoryId,name:t},method:"post"}).then((function(t){var n=t.data.data;console.log(n),e(n)})).catch((function(t){}))},handleSelect:function(t){var e=this;this.selectTag(t),this.$nextTick((function(){e.inputValue=""}))},selectTag:function(t){var e=this.tags.find((function(e){if(e.id==t.id)return!0}));e||this.tags.push(t)},loadTags:function(t){var e=this;Object(a["a"])({url:"editor/tags/list",data:{categoryId:this.categoryId,name:""},method:"post"}).then((function(t){var n=t.data.data;e.canSelectTags=n})).catch((function(t){}))},handleInputConfirm:function(){var t=this,e=this.inputValue;e&&Object(a["a"])({url:"editor/tags/add",data:{categoryId:this.categoryId,name:e},method:"post"}).then((function(n){var r=n.data.data;t.selectTag({id:r.id,name:e}),t.inputVisible=!1,t.inputValue="",t.tags.length>2?t.inputBtnVisible=!1:t.inputBtnVisible=!0})).catch((function(e){t.$message("标签添加失败")}))},handleClose:function(t,e){this.tags.splice(this.tags.indexOf(t),1),this.tags.length>2?this.inputBtnVisible=!1:this.inputBtnVisible=!0}}},s=c,l=(n("0923"),n("2877")),u=Object(l["a"])(s,r,i,!1,null,"38bfb3ee",null);e["a"]=u.exports},"57ac":function(t,e,n){},"61fd":function(t,e,n){},"629b":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"createTime",label:"时间",width:"180"}}),e("el-table-column",{attrs:{prop:"userName",label:"姓名",width:"180"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(n){return[e("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-success"},on:{click:function(e){return t.handleUse(n.$index,n.row)}}},[t._v("恢复使用")]),e("el-button",{attrs:{type:"warning",size:"mini",icon:"el-icon-refresh"},on:{click:function(e){return t.historyToDraft(n.$index,n.row)}}},[t._v("恢复到草稿")]),e("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.handleDelete(n.$index,n.row)}}},[t._v("删除")]),e("el-button",{attrs:{size:"mini",type:"success",icon:"el-icon-view"},on:{click:function(e){return t.handlePreview(n.$index,n.row)}}},[t._v("预览")])]}}])})],1),e("el-dialog",{attrs:{title:"警告",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("span",[t._v("删除后不可恢复，您确定要删除吗")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.gotoDelete}},[t._v("确 定")])],1)])],1)},i=[],o=n("f458"),a=n("c455");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e=d(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t){var e=f(t,"string");return"symbol"===c(e)?e:String(e)}function f(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function p(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */p=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(E){l=function(t,e,n){return t[e]=n}}function u(t,e,n,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),c=new L(i||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=u;var f={};function h(){}function m(){}function y(){}var v={};l(v,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(I([])));b&&b!==e&&n.call(b,o)&&(v=b);var w=y.prototype=h.prototype=Object.create(v);function j(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function i(r,o,a,s){var l=d(t[r],t,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==c(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,s)}),(function(t){i("throw",t,a,s)})):e.resolve(f).then((function(t){u.value=t,a(u)}),(function(t){return i("throw",t,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=d(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=d(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,f;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return m.prototype=y,r(w,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},j(_.prototype),l(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(w),l(w,s,"Generator"),l(w,o,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=I,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function h(t,e,n,r,i,o,a){try{var c=t[o](a),s=c.value}catch(l){return void n(l)}c.done?e(s):Promise.resolve(s).then(r,i)}function m(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){h(o,r,i,a,c,"next",t)}function c(t){h(o,r,i,a,c,"throw",t)}a(void 0)}))}}var y=n("f121"),v={mixins:[o["a"]],components:{},name:"history",props:{id:{type:String},type:{type:[Number,String]},projectId:{type:[Number,String]},pageKey:{type:String}},data:function(){return{tableData:[],dialogVisible:!1,deleteItem:{}}},created:function(){this.getHistory()},mounted:function(){},computed:{},methods:{handleUse:function(){var t=m(p().mark((function t(e,n){var r,i=this;return p().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("确定要直接恢复到此版本并发布吗，此操作会立即同步用户端，请谨慎操作！");case 2:if(r=t.sent,r){t.next=5;break}return t.abrupt("return");case 5:Object(a["a"])({url:"editor/pages/history-publish",method:"post",needLoading:!0,data:{pageKey:this.pageKey,id:n.pageId,projectId:this.projectId,type:+this.type,content:n.content}}).then((function(t){i.$message({type:"success",message:"版本发布成功"})}));case 6:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),historyToDraft:function(){var t=m(p().mark((function t(e,n){var r,i=this;return p().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$confirm("确定要将此版本恢复为草稿么，此操作会覆盖当前尚未发布的草稿，请谨慎操作！");case 2:if(r=t.sent,r){t.next=5;break}return t.abrupt("return");case 5:Object(a["a"])({url:"editor/pages/history-to-draft",method:"post",needLoading:!0,data:{type:+this.type,projectId:this.projectId,pageKey:this.pageKey,id:n.pageId,content:n.content}}).then((function(t){i.$message({type:"success",message:"版本替换成功"})}));case 6:case"end":return t.stop()}}),t,this)})));function e(e,n){return t.apply(this,arguments)}return e}(),handleDelete:function(t,e){this.dialogVisible=!0,this.deleteItem=l(l({},e),{},{index:t})},handlePreview:function(t,e){var n=this.checkPreviewUrl(e.id);window.open(n)},gotoDelete:function(){var t=this;this.dialogVisible=!1,Object(a["a"])({url:"editor/pages/history-delete?id=".concat(this.deleteItem.id),method:"get",needLoading:!0}).then((function(e){var n=e.data.data;n&&(t.$message({message:"删除成功",type:"success"}),t.tableData.splice(t.deleteItem.index,1))}))},getHistory:function(){var t=this;Object(a["a"])({url:"editor/pages/history?pageId=".concat(this.id),method:"get",needLoading:!0}).then((function(e){var n=e.data.data;n&&(n.forEach((function(t){t.createTime=new Date(t.createTime).Format("yyyy-MM-dd hh:mm")})),t.tableData=n)}))},checkPreviewUrl:function(t){return"".concat(y.VIEW_PATH,"components?historyid=").concat(t)}}},g=v,b=n("2877"),w=Object(b["a"])(g,r,i,!1,null,"80b0a488",null);e["default"]=w.exports},"66cc":function(t,e,n){"use strict";n("284f")},"6e2a":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"project-edit-container"},[e("div",{staticClass:"project-edit-errors"}),e("div",{staticClass:"row prepend-top-default"},[e("div",{staticClass:"col-lg-3 profile-settings-sidebar"},[e("h4",{staticClass:"prepend-top-0"},[t.id?e("div",[t._v("\n          更新页面\n        ")]):e("div",[t._v("\n          新建页面\n        ")])]),e("div",[t.id?e("div",[t._v("\n          修改自己的页面内容\n        ")]):e("div",[t._v("\n          创建的页面必须在指定的一个组里面，可以自己新建团队\n        ")])])]),e("div",{staticClass:"col-lg-9"},[e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"图标"}},[e("div",{staticClass:"headIcon"},[e("img",{attrs:{src:t._f("defaultProject")(t.form.image)}})]),e("upload",{attrs:{accept:"image",showBtn:!0,auto:!0},on:{uploadSuccess:t.uploadEnd}})],1),e("el-form-item",{attrs:{label:"所属项目"}},[e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.projectId,callback:function(e){t.$set(t.form,"projectId",e)},expression:"form.projectId"}},t._l(t.myProjects,(function(n){return e("el-option",{key:n.id,attrs:{label:n.groupName+"/"+n.projectName,value:n.id}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(n.groupName+"/"+n.projectName))])])})),1)],1),e("el-form-item",{attrs:{label:"页面名称",prop:"name",rules:[{required:!0,message:"输入1-35位页面名",trigger:"blur"},{min:1,max:35,message:"长度在 1 到 35 个字符",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"页面名称",maxlength:35},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"页面key",prop:"key",rules:[{required:!0,message:"输入1-35位页面名",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"页面名称"},model:{value:t.form.key,callback:function(e){t.$set(t.form,"key",e)},expression:"form.key"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"description",rules:[{required:!1,message:"输入描述",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]}},[e("el-input",{attrs:{type:"textarea",maxlength:50},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),e("el-form-item",{attrs:{label:"标签"}},[e("tags",{attrs:{"can-add":!0,"category-id":1,tags:t.form.tags},on:{"update:tags":function(e){return t.$set(t.form,"tags",e)}}})],1),e("el-form-item",{attrs:{label:"页面类型"}},[e("el-select",{attrs:{label:"页面类型",placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.pageType,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"设为模板"}},[e("el-radio-group",{model:{value:t.form.visibilitylevel,callback:function(e){t.$set(t.form,"visibilitylevel",e)},expression:"form.visibilitylevel"}},[e("el-radio",{attrs:{label:0}},[t._v("否")]),e("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",loading:t.loading},on:{click:t.onSubmit}},[t._v("提交")])],1)],1)],1)])])},i=[],o=n("f458"),a=n("d443"),c=n("c455"),s=n("3855"),l=n("5880");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){p(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function p(t,e,n){return e=h(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=m(t,"string");return"symbol"===u(e)?e:String(e)}function m(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var y={mixins:[o["a"]],components:{Upload:a["a"],Tags:s["a"]},name:"pages_cnew",props:{id:{type:Number},info:{type:Object}},data:function(){return{loading:!1,myProjects:[],form:{tags:[],id:"",key:"",name:"",type:"0",image:"",desc:"",projectId:"",visibilitylevel:0}}},computed:Object(l["mapState"])({pageType:function(t){return t.Metadata.pageType}}),mounted:function(){this.id&&this.getProjectInfo(),this.getGrops()},methods:{uploadEnd:function(t){this.form.image=t},getProjectInfo:function(){var t=this;Object(c["a"])({url:"editor/pages/info",method:"post",data:{id:this.id+""}}).then((function(e){var n=e.data.data;t.form={id:n.id,key:n.key,image:n.image,type:n.type,desc:n.desc,name:n.name,projectId:n.projectId,visibilitylevel:n.visibilitylevel,tags:n.tags||[]}}))},getGrops:function(){var t=this;Object(c["a"])({url:"project/project",method:"get",needLoading:!0,params:{count:100,start:0}}).then((function(e){var n=e.data.data;t.myProjects=n})).catch((function(){}))},onSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$message("信息填写错误"),!1;t.loading=!0,Object(c["a"])({url:"editor/pages/save",method:"post",data:f({},t.form)}).then((function(e){t.loading=!1,t.$notify({title:"成功",message:"修改成功",type:"success"})})).catch((function(){t.loading=!1,t.$notify({itle:"警告",message:"修改失败",type:"warning"})}))}))}}},v=y,g=(n("66cc"),n("2877")),b=Object(g["a"])(v,r,i,!1,null,"50aa52d7",null);e["default"]=b.exports},"9b1c":function(t,e,n){},a41d:function(t,e,n){"use strict";n("61fd")},d2b2:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content"},[t._m(0),t.hasData?e("div",{staticClass:"pages clearfix"}):e("div",[t._m(1),e("el-alert",{staticClass:"tipWarp",attrs:{title:"项目介绍",type:"info"}},[e("div",{domProps:{innerHTML:t._s(t.projectMd)}})])],1)])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"project-home-panel text-center"},[e("div",{staticClass:"container-fluid container-limited"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"blank-state"},[e("div",{staticClass:"blank-state-icon"},[e("i",{staticClass:"ifont icon-empty"}),e("span",[t._v("暂无页面信息，请先添加页面")])]),e("h3",{staticClass:"blank-state-title"})])}],o=n("f458"),a={mixins:[o["a"]],components:{},name:"pages_cdoc",props:{id:{type:String}},data:function(){return{projectKey:"",projectName:"",projectId:null,categoryType:{1:"活动类"},productList:[],parameter:{key:"",name:"",categoryId:"",status:"1"},pagination:{total:0,curr:1,size:10}}},mounted:function(){var t=this;this.projectId=this.$route.query.id-0,this.projectKey=this.$route.query.key,this.projectName=window.decodeURIComponent(this.$route.query.name||""),this.detailInfo(),this.bindEvent("pageAddSuccess",(function(){t.detailInfo()}))},computed:{hasData:function(t){return this.productList.length>0}},methods:{}},c=a,s=(n("34ac"),n("2877")),l=Object(s["a"])(c,r,i,!1,null,"4b9b2296",null);e["default"]=l.exports},d443:function(t,e,n){"use strict";var r=function(){var t=this,e=t._self._c;return e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showBtn,expression:"showBtn"}],attrs:{size:t.size,id:"virtualUpload",type:"primary"}},[t._v("上传\n  "),e("i",{staticClass:"el-icon-upload el-icon--right"})])},i=[],o=n("e97e"),a=n("46ee"),c=n.n(a),s=n("c455"),l=function(t){Object(s["a"])({url:"upload/getTocken",method:"get",needLoading:!1,data:{}}).then((function(e){var n=e.data.data;t(n)}))},u=function(t){var e=t.id,n=(t.fileName,t.filters),r=t.isAddUploadFile,i=t.callback;this.imgSrc="";var a=!1,s=this,l={image:{title:"资源选择",extensions:"jpg,gif,png,jpeg"},video:{title:"资源选择",extensions:"mp4"},audio:{title:"资源选择",extensions:"mp3"}};this.uploader=new c.a.Uploader({runtimes:"html5",browse_button:e,url:"https://oss.aliyuncs.com",filters:[l[n]],prevent_duplicates:!0,max_file_size:"100mb",init:{PostInit:function(){},FilesAdded:function(t,e){if(a)return!1;a=!0;var n=this,i=e[0].name;if(r){var c=i.lastIndexOf(".");-1!==c&&(i="ymm_"+(new Date).getTime()+i.substring(c)),o["c"].readAsDataURL(e[0].getNative(),(function(t){var r=new window.File([o["c"].getBlobBydataURI(t,e[0].type)],i,{type:e[0].type});n.addFile(r),n.removeFile(e[0]),s.send(i)}))}},BeforeUpload:function(t,e){},UploadProgress:function(t,e){},FileUploaded:function(t,e,n){200===n.status&&(s.imgSrc=s.imgSrc.replace("ymm.oss-cn-hangzhou.aliyuncs.com","imagecdn.ymm56.com"),i(s.imgSrc)),a=!1},Error:function(t,e){}}}),this.uploader.init()};u.prototype.send=function(t){var e=this;t=t||"ymm"+(new Date).getTime()+".png",l((function(n){n.key=n.dir+t,e.imgSrc=n.host+"/"+n.key;var r={key:n.key,policy:n.policy,OSSAccessKeyId:n.accessid,success_action_status:"200",signature:n.signature};console.log("newMultipartParams",r),e.uploader.setOption({url:n.host,multipart_params:r}),e.uploader.start()}))};var d=u,f=n("ed03"),p={mixins:[f["a"]],name:"UploadImage",components:{},props:{h2c:{required:!1,type:Object,default:function(){return{}}},templateElement:{type:String},size:{type:String,default:"medium"},accept:{type:String,default:""},auto:{type:Boolean,default:!1},showBtn:{type:Boolean,default:!1}},data:function(){return{uploadObject:null,options:null,onUploaded:null,templateData:{name:"",desc:""}}},watch:{accept:function(t){var e=this;this.uploadObject=new d({id:this.$el,isAddUploadFile:this.auto,filters:this.accept,callback:function(t){e.$emit("uploadSuccess",t),"function"===typeof e.onUploaded&&e.onUploaded(t)}})}},beforeDestroy:function(){},mounted:function(){var t=this;this.uploadObject=new d({id:this.$el,isAddUploadFile:this.auto,filters:this.accept,callback:function(e){t.$emit("uploadSuccess",e),"function"===typeof t.onUploaded&&t.onUploaded(e)}}),this.ema.bind("saveTemplate",(function(){t.options=null,t.onUploaded=null,t.getImageDataByDom(document.querySelector(t.templateElement),(function(e){t.uploadImg(e)}))}))},methods:{upload:function(t,e,n){var r=this;this.options=e||null,this.onUploaded=n||null,t=t||document.querySelector(this.templateElement),this.getImageDataByDom(t,(function(t){r.uploadImg(t)}))},uploadImg:function(t){var e="ymm"+(new Date).getTime()+".png",n=this,r=new window.File([o["c"].getBlobBydataURI(t,"image/png")],e,{type:"image/png"});n.uploadObject.uploader.addFile(r),n.uploadObject.send()},getImageDataByDom:function(t,e){o["c"].html2canvas(t,this.h2c).then((function(t){var n=t.toDataURL();e&&e(n)}))}}},h=p,m=n("2877"),y=Object(m["a"])(h,r,i,!1,null,"2bff0db8",null);e["a"]=y.exports},e9cb:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[t.project.id?e("div",{staticClass:"layout-nav"},[e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"nav-control scrolling-tabs-container"},[e("el-tabs",{staticClass:"nav-links",on:{"tab-click":t.tabHandleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[e("el-tab-pane",{attrs:{label:"数据报表",name:"datapanel"}}),t.project.role<4?e("el-tab-pane",{attrs:{label:"设置",name:"setting"}}):t._e(),t.project.role<4?e("el-tab-pane",{attrs:{label:"操作历史",name:"history"}}):t._e()],1)],1),e("div",{staticClass:"controls"},[e("el-button",{attrs:{type:"primary"},on:{click:t.goPageList}},[t._v("页面列表")])],1)])]):t._e(),e("div",{staticClass:"content-wrapper page-with-layout-nav"},[e("div",{staticClass:"container-fluid container-limited"},[t.project.id?e("div",{staticClass:"content"},["doc"===t.activeName?e("div",[e("c-doc",{attrs:{id:t.project.id}})],1):t._e(),"datapanel"===t.activeName?e("div",[e("data-panel",{attrs:{"page-key":t.project.key,id:t.project.id}})],1):t._e(),"apis"===t.activeName?e("div",{staticClass:"apis"},[e("c-interface",{attrs:{id:t.project.id}})],1):t._e(),"setting"===t.activeName?e("div",[e("div",{staticClass:"panel panel-default prepend-top-default"},[e("div",{staticClass:"panel-heading"},[t._v("\n              基本设置\n            ")]),e("div",{staticClass:"panel-body"},[e("c-new",{attrs:{id:t.project.id-0}})],1)]),e("div",{staticClass:"panel panel-danger"},[e("div",{staticClass:"panel-heading"},[t._v("删除页面")]),e("div",{staticClass:"panel-body"},[t._m(1),e("div",{staticClass:"form-actions"},[e("a",{staticClass:"btn btn-remove",attrs:{rel:"nofollow"},on:{click:t.delectProject}},[t._v("删除页面")])])])])]):t._e(),"history"===t.activeName?e("div",{staticClass:"historyPannel"},[e("history",{attrs:{type:t.project.type,"project-id":t.project.projectId,id:t.project.id,pageKey:t.project.key}})],1):t._e()]):e("div",[t._m(0)])])])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"blank-state"},[e("div",{staticClass:"blank-state-icon"},[e("i",{staticClass:"ifont icon-empty"}),e("span",[t._v("你无权访问该项目信息")])])])},function(){var t=this,e=t._self._c;return e("p",[t._v("\n                删除页面是不可逆的，确认\n                "),e("br")])}],o=n("f458"),a=n("c455"),c=n("9548"),s=n("6e2a"),l=n("d2b2"),u=n("629b");function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function f(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(E){s=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var o=e&&e.prototype instanceof h?e:h,a=Object.create(o.prototype),c=new L(i||[]);return r(a,"_invoke",{value:x(t,n,c)}),a}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=l;var p={};function h(){}function m(){}function y(){}var v={};s(v,o,(function(){return this}));var g=Object.getPrototypeOf,b=g&&g(g(I([])));b&&b!==e&&n.call(b,o)&&(v=b);var w=y.prototype=h.prototype=Object.create(v);function j(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function _(t,e){function i(r,o,a,c){var s=u(t[r],t,o);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==d(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){i("next",t,a,c)}),(function(t){i("throw",t,a,c)})):e.resolve(f).then((function(t){l.value=t,a(l)}),(function(t){return i("throw",t,a,c)}))}c(s.arg)}var o;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){i(t,n,e,r)}))}return o=o?o.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===p)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===p)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=u(r,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,p;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return m.prototype=y,r(w,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=s(y,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},j(_.prototype),s(_.prototype,a,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new _(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},j(w),s(w,c,"Generator"),s(w,o,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=I,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(c&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},t}function p(t,e,n,r,i,o,a){try{var c=t[o](a),s=c.value}catch(l){return void n(l)}c.done?e(s):Promise.resolve(s).then(r,i)}function h(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){p(o,r,i,a,c,"next",t)}function c(t){p(o,r,i,a,c,"throw",t)}a(void 0)}))}}var m={mixins:[o["a"]],components:{DataPanel:c["default"],CNew:s["default"],CDoc:l["default"],History:u["default"]},name:"project",data:function(){return{content:"",id:"",pageId:"",project:{},activeName:"datapanel"}},mounted:function(){var t=h(f().mark((function t(){var e,n;return f().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=this.$route.query.key,n=this.$route.query.id,!(e&&e.length>1)){t.next=12;break}return this.pageId=e,t.next=6,this.getIdByKey(e);case 6:if(t.t0=t.sent,t.t0){t.next=9;break}t.t0=n;case 9:this.id=t.t0,t.next=13;break;case 12:this.id=n;case 13:this.loadProject();case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),watch:{},methods:{loadProject:function(){var t=this;Object(a["a"])({url:"editor/pages/info",method:"post",needLoading:!0,data:{id:this.id+""}}).then((function(e){var n=e.data.data;n.id=n.id+"",t.project=n}))},newApi:function(){this.openDialog({name:"DAddPage",data:{title:"添加页面",form:{projectId:this.id}},methods:{}})},tabHandleClick:function(t){this.activeName=t.name},goPageList:function(){this.$router.push({path:"/project",query:{id:this.project.projectId}})},delectProject:function(){var t=this,e=this;this.$confirm("确认删除,删除后所有数据将清除","提示",{type:"warning"}).then((function(){Object(a["a"])({url:"editor/pages/delete",method:"POST",needLoading:!0,trimNull:!1,data:{id:t.id-0}}).then((function(n){e.$message({type:"success",message:"删除成功!"}),t.$router.push({path:"/project",query:{id:t.project.projectId}})})).catch((function(){}))})).catch((function(){t.$message("已取消")}))},getIdByKey:function(){var t=h(f().mark((function t(e){var n;return f().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(a["a"])({url:"editor/pages/getNameBykeys",method:"post",data:{ids:[e]}}).then((function(t){var e=t.data;return e&&e.data&&e.data.names}));case 2:return n=t.sent,t.abrupt("return",n&&n[0]&&n[0].id);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},y=m,v=(n("a41d"),n("2877")),g=Object(v["a"])(y,r,i,!1,null,"59177c01",null);e["default"]=g.exports}}]);