(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6c5e4640","chunk-ed037116"],{"22f7":function(t,e,n){"use strict";n("a06d")},"24cc":function(t,e,n){},"472b":function(t,e,n){"use strict";n("24cc")},8447:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",[e("hr"),e("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"图标"}},[e("div",{staticClass:"headIcon"},[e("img",{attrs:{src:t._f("defaultGroup")(t.form.logo)}})]),e("upload",{attrs:{accept:"image",showBtn:!0,auto:!0},on:{uploadSuccess:t.uploadEnd}}),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1),e("el-form-item",{attrs:{label:"名称",prop:"name",rules:[{required:!0,message:"输入1-10位组名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}]}},[e("el-input",{attrs:{placeholder:"名称",maxlength:15},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),e("el-form-item",{attrs:{label:"描述",prop:"description",rules:[{required:!0,message:"输入描述",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]}},[e("el-input",{attrs:{type:"textarea",maxlength:50},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),e("div",{staticClass:"form-group"},[e("div",{staticClass:"col-sm-offset-2 col-sm-10"})]),e("el-form-item",[t.id?e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即修改")]):e("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即创建")])],1)],1)],1)},o=[],i=n("f458"),s=n("c455"),l=n("d443"),c={mixins:[i["a"]],components:{Upload:l["a"]},name:"groups_cnew",props:{id:"",onSuccess:{type:Function,default:function(){}}},data:function(){return{info:{},form:{logo:"",name:"",description:""}}},mounted:function(){var t=this;this.id&&Object(s["a"])({url:"project/groupinfo",method:"get",params:{id:this.id}}).then((function(e){t.info=e.data.data,t.form.logo=t.info.logo,t.form.name=t.info.name,t.form.description=t.info.description}))},methods:{uploadEnd:function(t){this.form.logo=t},onSubmit:function(){var t=this;this.$refs.form.validate((function(e){if(!e)return t.$message("信息填写错误"),!1;if(t.info.id){var n={logo:t.form.logo,name:t.form.name,description:t.form.description,id:t.info.id};Object(s["a"])({url:"project/group",method:"put",data:n}).then((function(e){t.$message("修改成功"),t.onSuccess(e.data.data)})).catch((function(){t.$message("修改失败"),t.onSuccess()}))}else Object(s["a"])({url:"project/group",method:"post",data:t.form}).then((function(e){t.$message("添加成功"),t.onSuccess(e.data.data)})).catch((function(){t.onSuccess(),t.$message("添加失败")}))}))}}},r=c,u=(n("472b"),n("2877")),d=Object(u["a"])(r,a,o,!1,null,"0fde7920",null);e["default"]=d.exports},a06d:function(t,e,n){},ba46:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"flash-container flash-container-page"}),e("div",{staticClass:"container-fluid container-limited"},[e("div",{staticClass:"content"},[e("c-new",{attrs:{"on-success":t.addGroupSuccess}})],1)])])},o=[],i=n("f458"),s=n("8447"),l={mixins:[i["a"]],components:{CNew:s["default"]},name:"groups_new",data:function(){return{options:[{value:"1",label:"H5deplov"},{value:"2",label:"Util"},{value:"2",label:"添加新组"}],value:"",form:{image:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100",name:"",groupId:"",description:""}}},mounted:function(){},methods:{addGroupSuccess:function(t){t&&this.$router.push({path:"/groups/index",query:{id:t.id}})},onSubmit:function(){}}},c=l,r=(n("22f7"),n("2877")),u=Object(r["a"])(c,a,o,!1,null,"c18598b0",null);e["default"]=u.exports},d443:function(t,e,n){"use strict";var a=function(){var t=this,e=t._self._c;return e("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showBtn,expression:"showBtn"}],attrs:{size:t.size,id:"virtualUpload",type:"primary"}},[t._v("上传\n  "),e("i",{staticClass:"el-icon-upload el-icon--right"})])},o=[],i=n("e97e"),s=n("46ee"),l=n.n(s),c=n("c455"),r=function(t){Object(c["a"])({url:"upload/getTocken",method:"get",needLoading:!1,data:{}}).then((function(e){var n=e.data.data;t(n)}))},u=function(t){var e=t.id,n=(t.fileName,t.filters),a=t.isAddUploadFile,o=t.callback;this.imgSrc="";var s=!1,c=this,r={image:{title:"资源选择",extensions:"jpg,gif,png,jpeg"},video:{title:"资源选择",extensions:"mp4"},audio:{title:"资源选择",extensions:"mp3"}};this.uploader=new l.a.Uploader({runtimes:"html5",browse_button:e,url:"https://oss.aliyuncs.com",filters:[r[n]],prevent_duplicates:!0,max_file_size:"100mb",init:{PostInit:function(){},FilesAdded:function(t,e){if(s)return!1;s=!0;var n=this,o=e[0].name;if(a){var l=o.lastIndexOf(".");-1!==l&&(o="ymm_"+(new Date).getTime()+o.substring(l)),i["c"].readAsDataURL(e[0].getNative(),(function(t){var a=new window.File([i["c"].getBlobBydataURI(t,e[0].type)],o,{type:e[0].type});n.addFile(a),n.removeFile(e[0]),c.send(o)}))}},BeforeUpload:function(t,e){},UploadProgress:function(t,e){},FileUploaded:function(t,e,n){200===n.status&&(c.imgSrc=c.imgSrc.replace("ymm.oss-cn-hangzhou.aliyuncs.com","imagecdn.ymm56.com"),o(c.imgSrc)),s=!1},Error:function(t,e){}}}),this.uploader.init()};u.prototype.send=function(t){var e=this;t=t||"ymm"+(new Date).getTime()+".png",r((function(n){n.key=n.dir+t,e.imgSrc=n.host+"/"+n.key;var a={key:n.key,policy:n.policy,OSSAccessKeyId:n.accessid,success_action_status:"200",signature:n.signature};console.log("newMultipartParams",a),e.uploader.setOption({url:n.host,multipart_params:a}),e.uploader.start()}))};var d=u,p=n("ed03"),m={mixins:[p["a"]],name:"UploadImage",components:{},props:{h2c:{required:!1,type:Object,default:function(){return{}}},templateElement:{type:String},size:{type:String,default:"medium"},accept:{type:String,default:""},auto:{type:Boolean,default:!1},showBtn:{type:Boolean,default:!1}},data:function(){return{uploadObject:null,options:null,onUploaded:null,templateData:{name:"",desc:""}}},watch:{accept:function(t){var e=this;this.uploadObject=new d({id:this.$el,isAddUploadFile:this.auto,filters:this.accept,callback:function(t){e.$emit("uploadSuccess",t),"function"===typeof e.onUploaded&&e.onUploaded(t)}})}},beforeDestroy:function(){},mounted:function(){var t=this;this.uploadObject=new d({id:this.$el,isAddUploadFile:this.auto,filters:this.accept,callback:function(e){t.$emit("uploadSuccess",e),"function"===typeof t.onUploaded&&t.onUploaded(e)}}),this.ema.bind("saveTemplate",(function(){t.options=null,t.onUploaded=null,t.getImageDataByDom(document.querySelector(t.templateElement),(function(e){t.uploadImg(e)}))}))},methods:{upload:function(t,e,n){var a=this;this.options=e||null,this.onUploaded=n||null,t=t||document.querySelector(this.templateElement),this.getImageDataByDom(t,(function(t){a.uploadImg(t)}))},uploadImg:function(t){var e="ymm"+(new Date).getTime()+".png",n=this,a=new window.File([i["c"].getBlobBydataURI(t,"image/png")],e,{type:"image/png"});n.uploadObject.uploader.addFile(a),n.uploadObject.send()},getImageDataByDom:function(t,e){i["c"].html2canvas(t,this.h2c).then((function(t){var n=t.toDataURL();e&&e(n)}))}}},f=m,g=n("2877"),h=Object(g["a"])(f,a,o,!1,null,"2bff0db8",null);e["a"]=h.exports}}]);