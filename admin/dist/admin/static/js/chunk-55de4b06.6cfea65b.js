(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55de4b06"],{"0923":function(t,e,n){"use strict";n("9b1c")},"1bdd":function(t,e,n){"use strict";n("dc1d")},2747:function(t,e,n){"use strict";e["a"]={replace:!0,data:function(){return{title:"",size:"small",Visible:!0}},beforeCreated:function(){console.log("dialog---beforeCreated",this.$options.name)},created:function(){this.ema=window.EMA.getProxy(),console.log("dialog---created",this.$options.name)},beforeMount:function(){console.log("dialog---beforeMount",this.$options.name)},mounted:function(){console.log("dialog---mounted",this.$options.name)},beforeUpdate:function(){console.log("dialog---beforeUpdate",this.$options.name)},updated:function(){console.log("dialog---updated",this.$options.name)},activated:function(){console.log("dialog---activated",this.$options.name)},deactivated:function(){console.log("dialog---deactivated",this.$options.name)},beforDestroy:function(){console.log("dialog---beforDestroy",this.$options.name)},destroyed:function(){this.ema.dispose(),console.log("dialog---destroyed",this.$options.name)},methods:{bindEvent:function(t,e){this.$options.name||console.warn("绑定事件的组件不存在组件名称",t),this.ema.bind("".concat(this.$options.name,".").concat(t),e)},openDialog:function(t){this.ema.fire("Dialogs.push",t)},close:function(){console.log("close"),this.ema.fire("Dialogs.close",this.$options.name)}}}},3855:function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editerTags"},[e("span",{staticClass:"tagWarp"},[t._l(t.tags,(function(n,o){return e("el-tag",{key:o,staticClass:"tag",attrs:{closable:!0,"close-transition":!1},on:{close:function(e){return t.handleClose(o,n)}}},[e("i",{staticClass:"ifont icon-tag"}),t._v(t._s(n.name)+"\n    ")])})),t.inputVisible?e("el-autocomplete",{attrs:{size:"mini","value-key":"name","fetch-suggestions":t.querySearchAsync,maxlength:10,minlength:1,placeholder:"请输入内容"},on:{select:t.handleSelect},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm.apply(null,arguments)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):t._e(),t.canAdd&&t.inputBtnVisible?e("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:function(e){t.inputVisible=!0,t.inputBtnVisible=!1}}},[t._v("+新标签")]):t._e()],2),e("div",[e("h4",[t._v("可快速选标签列表")]),t._l(t.canSelectTags,(function(n,o){return e("el-tag",{key:o,staticClass:"tag",nativeOn:{click:function(e){return t.selectTag(n)}}},[e("i",{staticClass:"ifont icon-tag"}),t._v(t._s(n.name)+"\n    ")])}))],2)])},a=[],i=n("ed03"),s=n("c455"),r={mixins:[i["a"]],name:"UploadImage",components:{},props:{tags:{type:Array,default:function(t){return[]}},categoryId:{type:Number},canAdd:{type:Boolean,default:!1}},data:function(){return{canSelectTags:[],inputVisible:!1,inputBtnVisible:!0,inputValue:""}},watch:{},beforeDestroy:function(){},mounted:function(){this.categoryId&&this.loadTags()},methods:{querySearchAsync:function(t,e){Object(s["a"])({url:"editor/tags/list",data:{categoryId:this.categoryId,name:t},method:"post"}).then((function(t){var n=t.data.data;console.log(n),e(n)})).catch((function(t){}))},handleSelect:function(t){var e=this;this.selectTag(t),this.$nextTick((function(){e.inputValue=""}))},selectTag:function(t){var e=this.tags.find((function(e){if(e.id==t.id)return!0}));e||this.tags.push(t)},loadTags:function(t){var e=this;Object(s["a"])({url:"editor/tags/list",data:{categoryId:this.categoryId,name:""},method:"post"}).then((function(t){var n=t.data.data;e.canSelectTags=n})).catch((function(t){}))},handleInputConfirm:function(){var t=this,e=this.inputValue;e&&Object(s["a"])({url:"editor/tags/add",data:{categoryId:this.categoryId,name:e},method:"post"}).then((function(n){var o=n.data.data;t.selectTag({id:o.id,name:e}),t.inputVisible=!1,t.inputValue="",t.tags.length>2?t.inputBtnVisible=!1:t.inputBtnVisible=!0})).catch((function(e){t.$message("标签添加失败")}))},handleClose:function(t,e){this.tags.splice(this.tags.indexOf(t),1),this.tags.length>2?this.inputBtnVisible=!1:this.inputBtnVisible=!0}}},l=r,c=(n("0923"),n("2877")),u=Object(c["a"])(l,o,a,!1,null,"38bfb3ee",null);e["a"]=u.exports},"69cd":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{title:t.title,visible:t.Visible},on:{"update:visible":function(e){t.Visible=e},close:t.close}},[e("div",{staticClass:"content"},[e("el-form",{ref:"ruleForm",attrs:{"label-width":"80px",model:t.form,rules:t.rules}},[e("div",{staticClass:"base"},[e("h4",[t._v("基础信息")]),e("el-form-item",{attrs:{label:"所属项目"}},[e("el-select",{staticClass:"projectSelect",attrs:{placeholder:"请选择"},model:{value:t.form.projectId,callback:function(e){t.$set(t.form,"projectId",e)},expression:"form.projectId"}},t._l(t.myProjects,(function(n){return e("el-option",{key:n.id,attrs:{label:n.groupName+"/"+n.projectName,value:n.id}},[e("span",{staticStyle:{float:"left"}},[t._v(t._s(n.groupName+"/"+n.projectName))])])})),1)],1),e("el-row",{attrs:{type:"flex",gutter:0}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"页面标题",prop:"name"}},[e("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1),e("el-form-item",{attrs:{label:"描述",prop:"desc"}},[e("el-input",{attrs:{type:"textarea",placeholder:"该页面的简要描述1-50个字",minlength:1,maxlength:50},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc","string"===typeof e?e.trim():e)},expression:"form.desc"}})],1),e("el-form-item",{attrs:{label:"标签"}},[e("tags",{attrs:{"can-add":!0,"category-id":1,tags:t.form.tags},on:{"update:tags":function(e){return t.$set(t.form,"tags",e)}}})],1),e("el-form-item",{attrs:{label:"页面类型"}},[e("el-select",{attrs:{label:"页面类型",placeholder:"请选择"},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.pageType,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("el-form-item",{attrs:{label:"设为模板"}},[e("el-radio-group",{model:{value:t.form.visibilitylevel,callback:function(e){t.$set(t.form,"visibilitylevel",e)},expression:"form.visibilitylevel"}},[e("el-radio",{attrs:{label:0}},[t._v("否")]),e("el-radio",{attrs:{label:1}},[t._v("是")])],1)],1)],1)])],1),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.close}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addPageInfo("ruleForm")}}},[t._v("确定添加，编辑详情")])],1)])},a=[],i=n("2747"),s=n("c455"),r=n("3855"),l=n("5880");function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return e=p(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){var e=m(t,"string");return"symbol"===c(e)?e:String(e)}function m(t,e){if("object"!==c(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var g={mixins:[i["a"]],name:"DAddPage",components:{Tags:r["a"]},data:function(){return{Visible:!0,formLabelWidth:"150px",myProjects:[],form:{name:"",desc:"",type:"0",visibilitylevel:0,projectId:0,tags:[]},rules:{name:[{required:!0,message:"请输入页面标题",trigger:"blur"}],desc:[{required:!1,message:"请输入描述内容",trigger:"blur"}]}}},computed:Object(l["mapState"])({pageType:function(t){return t.Metadata.pageType}}),watch:{},mounted:function(){this.getGrops(),this.form.projectId=this.form.projectId-0},methods:{getGrops:function(){var t=this;Object(s["a"])({url:"project/project",method:"get",needLoading:!0,params:{count:100,start:0}}).then((function(e){var n=e.data.data;t.myProjects=n,0==n.length&&t.$confirm("你还没有任何项目，添加页面前需要先添加项目：前往添加项目","提示",{type:"warning"}).then((function(){t.close(),t.$router.push({path:"/projects/new"})})).catch((function(){t.$message("已取消")}))})).catch((function(){}))},addPageInfo:function(t){var e=this,n=this;this.$refs[t].validate((function(t){t&&Object(s["a"])({url:"editor/pages/save",method:"post",needLoading:!0,trimNull:!1,data:d({},n.form)}).then((function(t){n.$message({showClose:!0,message:"添加成功",type:"success"}),n.close(),e.ema.fire("projects_cdoc.pageAddSuccess")}))}))}}},b=g,h=(n("1bdd"),n("2877")),y=Object(h["a"])(b,o,a,!1,null,"730dae3a",null);e["default"]=y.exports},"9b1c":function(t,e,n){},dc1d:function(t,e,n){}}]);