(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47d32965"],{6603:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return 1===t.userInfo.role?e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"container-fluid container-limited box"},[e("div",{staticStyle:{"margin-bottom":"25px","text-align":"right"}},[e("el-input",{staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入页面 key"},model:{value:t.pagekey,callback:function(e){t.pagekey=e},expression:"pagekey"}}),e("el-button",{on:{click:function(e){return t.updateItem({},1,!0)}}},[t._v("加精")]),e("el-button",{on:{click:function(e){return t.updateItem({},2,!0)}}},[t._v("撤销加精")])],1),t._l(t.featuringPages,(function(a,n){return e("div",{key:n,staticClass:"boxSize"},[e("div",{staticClass:"sourceImg"},[e("a",{attrs:{href:t.getUrl(a,!0),target:"_blank"}},[e("img",{staticClass:"logo",attrs:{src:a.image||"https://ymm-maliang.oss-cn-hangzhou.aliyuncs.com/ymm-maliang/access/ymm1562307855048.png"}})])]),e("div",{staticClass:"sourceName"},[e("i",{staticClass:"itemName"},[t._v(t._s(a.name))])]),e("div",{staticClass:"bottom"},[e("a",{staticClass:"qr"},[t._m(0,!0),e("a",{staticClass:"erCode",staticStyle:{display:"inline-block",cursor:"pointer"},attrs:{title:a.desc,href:t.getUrl(a,!0),target:"_blank"}},[e("img",{staticClass:"qrcode",attrs:{src:t.getqrUrl(a),alt:""}})])]),e("el-button",{staticClass:"control-item",attrs:{size:"mini"},on:{click:function(e){return t.updateItem(a,1)}}},[t._v("设为精选")]),e("el-button",{staticClass:"control-item",attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.updateItem(a,2)}}},[t._v("设为普通")])],1)])}))],2),e("div",{staticClass:"loadmore"},[t.emptylist?e("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"}},[t._v("暂无待审核页面")]):e("el-button",{staticStyle:{"font-size":"20px"},attrs:{type:"text"},on:{click:t.list}},[t._v("再来一波 "),e("i",{staticClass:"el-icon-refresh"})])],1)]):t._e()},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"qrBox"},[e("i",{staticClass:"eqf-QRcode"})])}],s=a("f458"),r=a("c455"),c=a("f121"),o=a.n(c),l={mixins:[s["a"]],components:{},name:"dashboard-featuring",data:function(){return{pagekey:"",pages:[]}},mounted:function(){this.list()},computed:{emptylist:function(){return 0===this.pages.length},featuringPages:function(){return(this.pages||[]).filter((function(t){return 0===t.featured}))}},methods:{updateItem:function(t,e){var a=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n&&!/^\w{3,}$/.test(this.pagekey))return this.$message({type:"error",message:"请输入页面 key"});var i=this,s="是否设置为".concat(1===e?"精选":"普通");i.$confirm(s,{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["a"])({url:"editor/pages/update-featured",method:"POST",needLoading:!0,trimNull:!1,data:n?{key:a.pagekey,value:e}:{id:+t.id,value:e}}).then((function(a){n||(t.featured=e),i.$message({type:"success",message:"操作成功"}),i.pagekey=""}))}))},list:function(){var t=this;Object(r["a"])({url:"editor/pages/featuring",method:"post",needLoading:!0,trimNull:!1,data:{month:3}}).then((function(e){t.pages=e.data.data||[]}))},getUrl:function(t,e){if(e){var a="".concat(o.a.VIEW_PATH).concat(t.key),n=new window.Image;return n.src=a,n.src}return"".concat(o.a.EDITOR_PATH,"?key=").concat(t.key)},getqrUrl:function(t){return"https://www.liantu.com/api.php?text=".concat(encodeURIComponent(this.getUrl(t,1)))}}},u=l,d=(a("89e3e"),a("2877")),m=Object(d["a"])(u,n,i,!1,null,"17c701f8",null);e["default"]=m.exports},"89e3e":function(t,e,a){"use strict";a("fd32")},fd32:function(t,e,a){}}]);