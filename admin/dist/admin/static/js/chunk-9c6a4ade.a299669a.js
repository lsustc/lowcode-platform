(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9c6a4ade","chunk-ed037116"],{"24cc":function(e,t,o){},2747:function(e,t,o){"use strict";t["a"]={replace:!0,data:function(){return{title:"",size:"small",Visible:!0}},beforeCreated:function(){console.log("dialog---beforeCreated",this.$options.name)},created:function(){this.ema=window.EMA.getProxy(),console.log("dialog---created",this.$options.name)},beforeMount:function(){console.log("dialog---beforeMount",this.$options.name)},mounted:function(){console.log("dialog---mounted",this.$options.name)},beforeUpdate:function(){console.log("dialog---beforeUpdate",this.$options.name)},updated:function(){console.log("dialog---updated",this.$options.name)},activated:function(){console.log("dialog---activated",this.$options.name)},deactivated:function(){console.log("dialog---deactivated",this.$options.name)},beforDestroy:function(){console.log("dialog---beforDestroy",this.$options.name)},destroyed:function(){this.ema.dispose(),console.log("dialog---destroyed",this.$options.name)},methods:{bindEvent:function(e,t){this.$options.name||console.warn("绑定事件的组件不存在组件名称",e),this.ema.bind("".concat(this.$options.name,".").concat(e),t)},openDialog:function(e){this.ema.fire("Dialogs.push",e)},close:function(){console.log("close"),this.ema.fire("Dialogs.close",this.$options.name)}}}},"472b":function(e,t,o){"use strict";o("24cc")},8447:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("hr"),t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[t("el-form-item",{attrs:{label:"图标"}},[t("div",{staticClass:"headIcon"},[t("img",{attrs:{src:e._f("defaultGroup")(e.form.logo)}})]),t("upload",{attrs:{accept:"image",showBtn:!0,auto:!0},on:{uploadSuccess:e.uploadEnd}}),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1),t("el-form-item",{attrs:{label:"名称",prop:"name",rules:[{required:!0,message:"输入1-10位组名",trigger:"blur"},{min:1,max:15,message:"长度在 1 到 15 个字符",trigger:"blur"}]}},[t("el-input",{attrs:{placeholder:"名称",maxlength:15},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"描述",prop:"description",rules:[{required:!0,message:"输入描述",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}]}},[t("el-input",{attrs:{type:"textarea",maxlength:50},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),t("div",{staticClass:"form-group"},[t("div",{staticClass:"col-sm-offset-2 col-sm-10"})]),t("el-form-item",[e.id?t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即修改")]):t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("立即创建")])],1)],1)],1)},i=[],a=o("f458"),s=o("c455"),l=o("d443"),c={mixins:[a["a"]],components:{Upload:l["a"]},name:"groups_cnew",props:{id:"",onSuccess:{type:Function,default:function(){}}},data:function(){return{info:{},form:{logo:"",name:"",description:""}}},mounted:function(){var e=this;this.id&&Object(s["a"])({url:"project/groupinfo",method:"get",params:{id:this.id}}).then((function(t){e.info=t.data.data,e.form.logo=e.info.logo,e.form.name=e.info.name,e.form.description=e.info.description}))},methods:{uploadEnd:function(e){this.form.logo=e},onSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message("信息填写错误"),!1;if(e.info.id){var o={logo:e.form.logo,name:e.form.name,description:e.form.description,id:e.info.id};Object(s["a"])({url:"project/group",method:"put",data:o}).then((function(t){e.$message("修改成功"),e.onSuccess(t.data.data)})).catch((function(){e.$message("修改失败"),e.onSuccess()}))}else Object(s["a"])({url:"project/group",method:"post",data:e.form}).then((function(t){e.$message("添加成功"),e.onSuccess(t.data.data)})).catch((function(){e.onSuccess(),e.$message("添加失败")}))}))}}},r=c,d=(o("472b"),o("2877")),u=Object(d["a"])(r,n,i,!1,null,"0fde7920",null);t["default"]=u.exports},bb17:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{title:e.title,visible:e.Visible},on:{"update:visible":function(t){e.Visible=t},close:e.close}},[t("div",[t("c-new")],1)])},i=[],a=o("2747"),s=o("8447"),l={mixins:[a["a"]],name:"DGroupsNew",data:function(){return{form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},components:{CNew:s["default"]},computed:{},methods:{onSubmit:function(){console.log("submit!")},showDialog:function(){this.openDialog({name:"DDemo2",data:{},methods:{oktest:function(){console.log(this),window.alert("good")}}})}}},c=l,r=o("2877"),d=Object(r["a"])(c,n,i,!1,null,"f6bc16a8",null);t["default"]=d.exports},d443:function(e,t,o){"use strict";var n=function(){var e=this,t=e._self._c;return t("el-button",{directives:[{name:"show",rawName:"v-show",value:e.showBtn,expression:"showBtn"}],attrs:{size:e.size,id:"virtualUpload",type:"primary"}},[e._v("上传\n  "),t("i",{staticClass:"el-icon-upload el-icon--right"})])},i=[],a=o("e97e"),s=o("46ee"),l=o.n(s),c=o("c455"),r=function(e){Object(c["a"])({url:"upload/getTocken",method:"get",needLoading:!1,data:{}}).then((function(t){var o=t.data.data;e(o)}))},d=function(e){var t=e.id,o=(e.fileName,e.filters),n=e.isAddUploadFile,i=e.callback;this.imgSrc="";var s=!1,c=this,r={image:{title:"资源选择",extensions:"jpg,gif,png,jpeg"},video:{title:"资源选择",extensions:"mp4"},audio:{title:"资源选择",extensions:"mp3"}};this.uploader=new l.a.Uploader({runtimes:"html5",browse_button:t,url:"https://oss.aliyuncs.com",filters:[r[o]],prevent_duplicates:!0,max_file_size:"100mb",init:{PostInit:function(){},FilesAdded:function(e,t){if(s)return!1;s=!0;var o=this,i=t[0].name;if(n){var l=i.lastIndexOf(".");-1!==l&&(i="ymm_"+(new Date).getTime()+i.substring(l)),a["c"].readAsDataURL(t[0].getNative(),(function(e){var n=new window.File([a["c"].getBlobBydataURI(e,t[0].type)],i,{type:t[0].type});o.addFile(n),o.removeFile(t[0]),c.send(i)}))}},BeforeUpload:function(e,t){},UploadProgress:function(e,t){},FileUploaded:function(e,t,o){200===o.status&&(c.imgSrc=c.imgSrc.replace("ymm.oss-cn-hangzhou.aliyuncs.com","imagecdn.ymm56.com"),i(c.imgSrc)),s=!1},Error:function(e,t){}}}),this.uploader.init()};d.prototype.send=function(e){var t=this;e=e||"ymm"+(new Date).getTime()+".png",r((function(o){o.key=o.dir+e,t.imgSrc=o.host+"/"+o.key;var n={key:o.key,policy:o.policy,OSSAccessKeyId:o.accessid,success_action_status:"200",signature:o.signature};console.log("newMultipartParams",n),t.uploader.setOption({url:o.host,multipart_params:n}),t.uploader.start()}))};var u=d,m=o("ed03"),p={mixins:[m["a"]],name:"UploadImage",components:{},props:{h2c:{required:!1,type:Object,default:function(){return{}}},templateElement:{type:String},size:{type:String,default:"medium"},accept:{type:String,default:""},auto:{type:Boolean,default:!1},showBtn:{type:Boolean,default:!1}},data:function(){return{uploadObject:null,options:null,onUploaded:null,templateData:{name:"",desc:""}}},watch:{accept:function(e){var t=this;this.uploadObject=new u({id:this.$el,isAddUploadFile:this.auto,filters:this.accept,callback:function(e){t.$emit("uploadSuccess",e),"function"===typeof t.onUploaded&&t.onUploaded(e)}})}},beforeDestroy:function(){},mounted:function(){var e=this;this.uploadObject=new u({id:this.$el,isAddUploadFile:this.auto,filters:this.accept,callback:function(t){e.$emit("uploadSuccess",t),"function"===typeof e.onUploaded&&e.onUploaded(t)}}),this.ema.bind("saveTemplate",(function(){e.options=null,e.onUploaded=null,e.getImageDataByDom(document.querySelector(e.templateElement),(function(t){e.uploadImg(t)}))}))},methods:{upload:function(e,t,o){var n=this;this.options=t||null,this.onUploaded=o||null,e=e||document.querySelector(this.templateElement),this.getImageDataByDom(e,(function(e){n.uploadImg(e)}))},uploadImg:function(e){var t="ymm"+(new Date).getTime()+".png",o=this,n=new window.File([a["c"].getBlobBydataURI(e,"image/png")],t,{type:"image/png"});o.uploadObject.uploader.addFile(n),o.uploadObject.send()},getImageDataByDom:function(e,t){a["c"].html2canvas(e,this.h2c).then((function(e){var o=e.toDataURL();t&&t(o)}))}}},f=p,g=o("2877"),h=Object(g["a"])(f,n,i,!1,null,"2bff0db8",null);t["a"]=h.exports}}]);